# vCenter SunucularÄ±
$counter=0
$vcenters = ("apgaraavcs801", "ptekvcs01", "apgartstvcs201", "ptekvcsd01", "apgartksvcs201", "apgartksvcs801")
foreach ($vcenter in $vcenters) {
    Connect-VIServer -Server $vcenter
    $vms= Get-VM
    foreach($vm in $vms){
        if($vm.Guest.OSFullName -like "*Microsoft Windows Server 2016*"){
            $vm.Name
            $vm.Guest.OSFullName
            $disks = $vm.Guest.Disks

            foreach($disk in $disks){
                if($disk.Path -eq "C:\"){
                    $disk.Path
                    "{0:F2}" -f [decimal]$disk.CapacityGB
                    "{0:F2}" -f [decimal]$disk.FreeSpaceGB
                    "{0:F2}" -f [decimal]($disk.FreeSpaceGB/$disk.CapacityGB*100)
                }

            }
            $vcenter
            Write-Host "-------------------------------------------------"
        }
        
    }

    Disconnect-VIServer -Server $vcenter -Confirm:$false

}
